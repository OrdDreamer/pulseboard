{% load static %}

<!-- Desktop Sidebar -->
<aside class="d-none d-md-flex flex-column vh-100 bg-dark text-white" style="width: 94px">
  <div
      class="p-3 d-flex align-items-center justify-content-center border-bottom border-secondary"
  >
    <a
        href="{% url 'core:dashboard' %}"
        class="text-decoration-none d-block"
        aria-label="Pulseboard â€“ go to the home page"
        title="Pulseboard"
    >
      <img
          src="{% static 'images/logo.svg' %}"
          alt="Pulseboard"
          width="48"
          height="48"
          class="img-fluid"
      />
    </a>
  </div>

  <nav class="flex-grow-1 py-3" aria-label="Main navigation">
    <ul class="nav nav-pills flex-column align-items-center gap-2 px-2 mb-0">
      <li class="nav-item {{ dashboard_page }}">
        <a
            href="{% url 'core:dashboard' %}"
            class="nav-link text-white d-flex align-items-center justify-content-center sidebar-link {{ dashboard_page }}"
            style="
            width: 48px;
            height: 48px;
            border-radius: 8px;
            transition: all 0.2s;
          "
            title="Dashboard"
            aria-label="Dashboard"
        >
          <i class="bi bi-speedometer2 fs-5"></i>
          <span class="visually-hidden">Dashboard</span>
        </a>
      </li>
      <li class="nav-item {{ task_page }}">
        <a
            href="{% url 'core:task-list' %}"
            class="nav-link text-white d-flex align-items-center justify-content-center sidebar-link {{ task_page }}"
            style="
            width: 48px;
            height: 48px;
            border-radius: 8px;
            transition: all 0.2s;
          "
            title="Tasks"
            aria-label="Tasks"
        >
          <i class="bi bi-list-check fs-5"></i>
          <span class="visually-hidden">Tasks</span>
        </a>
      </li>
      <li class="nav-item {{ worker_page }}">
        <a
            href="{% url 'core:worker-list' %}"
            class="nav-link text-white d-flex align-items-center justify-content-center sidebar-link {{ worker_page }}"
            style="
            width: 48px;
            height: 48px;
            border-radius: 8px;
            transition: all 0.2s;
          "
            title="Workers"
            aria-label="Workers"
        >
          <i class="bi bi-people fs-5"></i>
          <span class="visually-hidden">Workers</span>
        </a>
      </li>
    </ul>
  </nav>

  {% if user.is_authenticated %}
    <div
        class="p-3 d-flex flex-column align-items-center gap-2 border-top border-secondary"
    >

      <div
          class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white fw-bold"
          style="width: 40px; height: 40px; font-size: 14px"
          title="{{ user.get_full_name|default:user.username }}"
      >
        {% if user.first_name and user.last_name %}
          {{ user.first_name|first }}{{ user.last_name|first }}
        {% elif user.first_name %}
          {{ user.first_name|first }}
        {% elif user.last_name %}
          {{ user.last_name|first }}
        {% else %}
          {{ user.username|first|upper }}
        {% endif %}
      </div>
      <form method="post" action="{% url 'logout' %}" class="mb-0">
        {% csrf_token %}
        <button
            type="submit"
            class="btn btn-link text-white text-decoration-none p-2 d-flex align-items-center justify-content-center sidebar-link"
            style="
          width: 48px;
          height: 48px;
          border-radius: 8px;
          transition: all 0.2s;
        "
            title="Logout"
            aria-label="Logout"
        >
          <i class="bi bi-box-arrow-right fs-5"></i>
          <span class="visually-hidden">Logout</span>
        </button>
      </form>
    </div>
  {% endif %}
</aside>

<!-- Mobile Footer Navigation -->
<aside class="d-flex d-md-none flex-row bg-dark text-white fixed-bottom">
  <nav class="flex-grow-1" aria-label="Main navigation">
    <ul class="nav nav-pills flex-row align-items-center justify-content-around m-0 p-2">
      {% if user.is_authenticated %}
      <li class="nav-item">
        <form method="post" action="{% url 'logout' %}" class="mb-0">
          {% csrf_token %}
          <button
              type="submit"
              class="btn text-secondary d-flex flex-column align-items-center justify-content-center sidebar-link p-2 rounded-2"
              style="min-width: 60px;"
              title="Logout"
              aria-label="Logout"
          >
            <i class="bi bi-box-arrow-right fs-5 mb-1"></i>
            <span style="font-size: 11px;">Logout</span>
          </button>
        </form>
      </li>
      {% endif %}
      <li class="nav-item {{ dashboard_page }}">
        <a
            href="{% url 'core:dashboard' %}"
            class="nav-link text-white d-flex flex-column align-items-center justify-content-center sidebar-link p-2 rounded-2 {{ dashboard_page }}"
            style="min-width: 60px;"
            title="Dashboard"
            aria-label="Dashboard"
        >
          <i class="bi bi-speedometer2 fs-5 mb-1"></i>
          <span style="font-size: 11px;">Dashboard</span>
        </a>
      </li>
      <li class="nav-item {{ task_page }}">
        <a
            href="{% url 'core:task-list' %}"
            class="nav-link text-white d-flex flex-column align-items-center justify-content-center sidebar-link p-2 rounded-2 {{ task_page }}"
            style="min-width: 60px;"
            title="Tasks"
            aria-label="Tasks"
        >
          <i class="bi bi-list-check fs-5 mb-1"></i>
          <span style="font-size: 11px;">Tasks</span>
        </a>
      </li>
      <li class="nav-item {{ worker_page }}">
        <a
            href="{% url 'core:worker-list' %}"
            class="nav-link text-white d-flex flex-column align-items-center justify-content-center sidebar-link p-2 rounded-2 {{ worker_page }}"
            style="min-width: 60px;"
            title="Workers"
            aria-label="Workers"
        >
          <i class="bi bi-people fs-5 mb-1"></i>
          <span style="font-size: 11px;">Workers</span>
        </a>
      </li>
    </ul>
  </nav>
</aside>
